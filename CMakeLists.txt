cmake_minimum_required(VERSION 3.27)
project(sorting_group_project)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_EXE_LINKER_FLAGS "-static")

# Todo: file is a configure function, so any deletions of sort.h make the cmake panic :c

file(GLOB sort_src "src/sort/*.cpp")

#file(REMOVE "src/sort.h")
#file(APPEND "src/sort.h" "// Auto-generated by CMAKE script.\n")

file(WRITE "src/sort.h" "// Auto-generated by CMAKE script.\n")

foreach(sortAlgo ${sort_src})
    get_filename_component(fileName ${sortAlgo} NAME)
    file(APPEND "src/sort.h" "#include \"sort/${fileName}\"\n")
endforeach(sortAlgo ${sort_src})

add_executable(${PROJECT_NAME} src/main.cpp)

set_target_properties(${PROJECT_NAME} PROPERTIES OUTPUT_NAME "sgp")
set_target_properties(${PROJECT_NAME} PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR})

get_cmake_property(_variableNames VARIABLES)
list (SORT _variableNames)
foreach (_variableName ${_variableNames})
    message(STATUS "${_variableName}=${${_variableName}}")
endforeach()